app||(app={}),function(e,t,i){app.ClienteModel=Backbone.Model.extend({urlRoot:function(){return e.Misc.urlFull(Route.route("cliente.index"))},idAttribute:"id",defaults:{}})}(this,this.document),app||(app={}),function(e,t,i,n){app.CreateSimulador=Backbone.View.extend({el:"body",templateAmortizacion:_.template(e("#show-amortizacion-tpl").html()||""),templateGracia:_.template(e("#show-gracia-tpl").html()||""),events:{"submit #cliente-form":"onStore","change #ea_cliente":"changeEA","change #nominal_anual_cliente":"changeNominal","change #ip_cliente":"changeInterePeriodico","click .btn-pdf-click":"clickedBtnPdf"},parameters:{},initialize:function(t){t!==n&&_.isObject(t.parameters)&&(this.parameters=e.extend({},this.parameters,t.parameters)),this.$wraperForm=this.$("#simulador"),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},onStore:function(e){if(!e.isDefaultPrevented()){e.preventDefault();var i=t.Misc.formToJson(e.target);this.model.save(i,{patch:!0,silent:!0})}},changeEA:function(e){e.preventDefault();var t=this.$("#periodo_cliente").val(),i=12/t*30,n=this.$(e.target).val()/100,r=Math.pow(1+n,i/360);r-=1,r=100*r;var a=r*t;this.$("#ip_cliente").val(r.toFixed(2)),this.$("#nominal_anual_cliente").val(a.toFixed(2))},changeNominal:function(e){var t=this.$("#periodo_cliente").val();dias=12/t*30,interesP=this.$(e.target).val()/t,efectivoAnual=Math.pow(1+interesP/100,360/dias),efectivoAnual-=1,efectivoAnual=100*efectivoAnual,this.$("#ip_cliente").val(interesP.toFixed(2)),this.$("#ea_cliente").val(efectivoAnual.toFixed(2))},changeInterePeriodico:function(e){var t=this.$("#periodo_cliente").val();dias=12/t*30,interesP=this.$(e.target).val(),nominal=t*interesP,efectivoAnual=Math.pow(1+interesP/100,360/dias),efectivoAnual-=1,efectivoAnual=100*efectivoAnual,this.$("#nominal_anual_cliente").val(nominal.toFixed(2)),this.$("#ea_cliente").val(efectivoAnual.toFixed(2))},clickedBtnPdf:function(t){var i=new jsPDF;i.fromHTML(e("#simulador").html(),{width:20,heigth:10}),i.save("test.pdf")},render:function(){var e=this.model.toJSON();this.model.has("check_periodo_gracia")?this.$wraperForm.empty().html(this.templateGracia(e)):this.$wraperForm.empty().html(this.templateAmortizacion(e))},ready:function(){"function"==typeof t.initComponent.initToUpper&&t.initComponent.initToUpper(),"function"==typeof t.initComponent.initSpinner&&t.initComponent.initSpinner()},loadSpinner:function(e,i,n){t.Misc.setSpinner(this.el)},responseServer:function(e,i,n){if(t.Misc.removeSpinner(this.el),!_.isUndefined(i.success)){var r=i.success?"":i.errors;if(_.isObject(i.errors)&&(r=t.Misc.parseErrors(i.errors)),!i.success)return void alertify.error(r);this.render()}}})}(jQuery,this,this.document),function(e,t,i,n){var r=function(e){};r.prototype={initialize:function(){},formToJson:function(t){var i={},r=[];return r=e.prototype.isPrototypeOf(t)?t.serializeArray():e(t).serializeArray(),e.each(r,function(){i[this.name]!==n?(i[this.name].push||(i[this.name]=[i[this.name]]),i[this.name].push(this.value||"")):i[this.name]=this.value||""}),i},isUrl:function(e){var t=/^(http[s]?:\/\/(www\.)?|ftp:\/\/(www\.)?|www\.){1}([0-9A-Za-z-\.@:%_\+~#=]+)+(\/(.)*)?(\?(.)*)?/i;return t.test(e)},urlFull:function(e){if(!this.isUrl(i.url))return e;e||(e="");var t=/^\//;return t.test(e)||(e="/"+e),i.url+e},parseErrors:function(t){var i="";if(_.isObject(t)){var n="<ul>";e.each(t,function(e,t){n+="<li>"+t[0]+"</li>"}),n+="</ul>",i=n}return i},setSpinner:function(t){t&&e(t).prepend('<div class="overlay"><i class="fa fa-refresh fa-spin"></i></div>')},removeSpinner:function(t){var i=e(t).find(".overlay");i.length&&i.remove()},dataTableES:function(){return{sProcessing:'<div class="overlay"><i class="fa fa-refresh fa-spin"></i></div>',sLengthMenu:"Mostrar _MENU_ registros",sZeroRecords:"No se encontraron resultados",sEmptyTable:"Ningún dato disponible en esta tabla",sInfo:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",sInfoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",sInfoFiltered:"(filtrado de un total de _MAX_ registros)",sInfoPostFix:"",sSearch:"Buscar:",sUrl:"",sInfoThousands:",",sLoadingRecords:"Cargando...",oPaginate:{sFirst:"Primero",sLast:"Último",sNext:"Siguiente",sPrevious:"Anterior"},oAria:{sSortAscending:": Activar para ordenar la columna de manera ascendente",sSortDescending:": Activar para ordenar la columna de manera descendente"}}},redirect:function(e){e!==n&&""!=e?t.location=e:t.location.reload()},successRedirect:function(e,i){alertify.success(e),setTimeout(function(){t.Misc.redirect(i)},500)},currency:function(e){return accounting.formatMoney(e,"",2,".",",")}},t.Misc=new r,t.Misc.initialize()}(jQuery,this,this.document),function(){var e=function(){var e={absolute:!1,rootUrl:"http://localhost",routes:[{host:null,methods:["GET","HEAD"],uri:"cliente",name:"cliente.index",action:"AppHttpControllersHomeController@index"},{host:null,methods:["GET","HEAD"],uri:"cliente/create",name:"cliente.create",action:"AppHttpControllersHomeController@create"},{host:null,methods:["POST"],uri:"cliente",name:"cliente.store",action:"AppHttpControllersHomeController@store"},{host:null,methods:["GET","HEAD"],uri:"cliente/{cliente}",name:"cliente.show",action:"AppHttpControllersHomeController@show"},{host:null,methods:["GET","HEAD"],uri:"cliente/{cliente}/edit",name:"cliente.edit",action:"AppHttpControllersHomeController@edit"},{host:null,methods:["PUT"],uri:"cliente/{cliente}",name:"cliente.update",action:"AppHttpControllersHomeController@update"},{host:null,methods:["PATCH"],uri:"cliente/{cliente}",name:null,action:"AppHttpControllersHomeController@update"},{host:null,methods:["DELETE"],uri:"cliente/{cliente}",name:"cliente.destroy",action:"AppHttpControllersHomeController@destroy"}],prefix:"",route:function(e,t,i){if(i=i||this.getByName(e))return this.toRoute(i,t)},url:function(e,t){t=t||[];var i=e+"/"+t.join("/");return this.getCorrectUrl(i)},toRoute:function(e,t){var i=this.replaceNamedParameters(e.uri,t),n=this.getRouteQueryString(t);return this.absolute&&this.isOtherHost(e)?"//"+e.host+"/"+i+n:this.getCorrectUrl(i+n)},isOtherHost:function(e){return e.host&&e.host!=window.location.hostname},replaceNamedParameters:function(e,t){return e=e.replace(/\{(.*?)\??\}/g,function(e,i){if(t.hasOwnProperty(i)){var n=t[i];return delete t[i],n}return e}),e=e.replace(/\/\{.*?\?\}/g,"")},getRouteQueryString:function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i+"="+e[i]);return t.length<1?"":"?"+t.join("&")},getByName:function(e){for(var t in this.routes)if(this.routes.hasOwnProperty(t)&&this.routes[t].name===e)return this.routes[t]},getByAction:function(e){for(var t in this.routes)if(this.routes.hasOwnProperty(t)&&this.routes[t].action===e)return this.routes[t]},getCorrectUrl:function(e){var t=this.prefix+"/"+e.replace(/^\/?/,"");return this.absolute?this.rootUrl.replace("//?$/","")+t:t}},t=function(e){if(!e)return"";var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i+'="'+e[i]+'"');return t.join(" ")},i=function(e,i,n){return i=i||e,n=t(n),'<a href="'+e+'" '+n+">"+i+"</a>"};return{action:function(t,i){return i=i||{},e.route(t,i,e.getByAction(t))},route:function(t,i){return i=i||{},e.route(t,i)},url:function(t,i){return i=i||{},e.url(t,i)},link_to:function(e,t,n){return e=this.url(e),i(e,t,n)},link_to_route:function(e,t,n,r){var a=this.route(e,n);return i(a,t,r)},link_to_action:function(e,t,n,r){var a=this.action(e,n);return i(a,t,r)}}}.call(this);"function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof module&&module.exports?module.exports=e:window.Route=e}.call(this),app||(app={}),function(e,t,i,n){app.AppRouter=new(Backbone.Router.extend({routes:{"cliente(/)":"getCreateSimulador"},parseQueryString:function(e){var t={};return e&&_.each(_.map(decodeURI(e).split(/&/g),function(e,t){var i=e.split("="),r={};if(i.length>=1){var a=n;2==i.length&&(a=i[1]),r[i[0]]=a}return r}),function(e){_.extend(t,e)}),t},initialize:function(e){},start:function(){var e={pushState:!0};"-1"!=i.domain.search(/(104.236.57.82|localhost)/gi)&&(e.root="/economia/public/"),Backbone.history.start(e)},getCreateSimulador:function(){this.clientModel=new app.ClienteModel,this.CreateSimuladorView instanceof Backbone.View&&(this.CreateSimuladorView.stopListening(),this.CreateSimuladorView.undelegateEvents()),this.CreateSimuladorView=new app.CreateSimulador({model:this.clientModel})}}))}(jQuery,this,this.document);var app=app||{};!function(e,t,i,n){var r=function(){e.ajaxSetup({cache:!1,headers:{"X-CSRF-TOKEN":e('meta[name="csrf-token"]').attr("content")}})};String.prototype.replaceAll=function(e,t){return t?this.replace(new RegExp("["+e+"]","g"),t):this},r.prototype={initialize:function(){this.initApp(),this.initICheck(),this.initAlertify(),this.initSelect2(),this.initToUpper(),this.initSpinner(),this.initInputMask(),this.initDisabledPaste()},initApp:function(){t.app.AppRouter.start()},initICheck:function(){e("input").iCheck({checkboxClass:"icheckbox_minimal-red",radioClass:"iradio_minimal-red"})},initAlertify:function(){alertify.logPosition("bottom right")},initSelect2:function(){var t={".select2-default":{language:"es",placeholder:"Seleccione",allowClear:!1},".select2-default-clear":{language:"es",placeholder:"Seleccione",allowClear:!0},".choice-select-autocomplete":{language:"es",placeholder:"Seleccione una opción",ajax:{delay:250,data:function(e){return{q:e.term,page:e.page}},processResults:function(e,t){return t.page=t.page||1,{results:e,pagination:{more:30*t.page<e.total_count}}},escapeMarkup:function(e){return e},cache:!0,minimumInputLength:1}}};for(var i in t)e(i).each(function(r,a){var o=e(a);if(o.data("select2")==n&&(o.select2(t[i]),".choice-select-autocomplete"==i)){var s=o.data("initial-value"),l=null;if(s){var c=o.data("select2").dataAdapter.ajaxOptions;l=e("<option selected>Cargando...</option>").val(s),o.append(l).trigger("change"),e.get(c.url,{id:s},function(e){l.text(e[0].text).val(e[0].id),l.removeData(),o.trigger("change")})}}})},initToUpper:function(){e(".input-toupper").change(function(){e(this).val(e(this).val().toUpperCase())})},initSpinner:function(){e(".spinner-percentage").spinner({step:.1,start:0,min:0,max:100,numberFormat:"n",stop:function(t,i){_.isNull(this.value)||_.isUndefined(this.value)||_.isEmpty(this.value)||(!e.isNumeric(this.value)||this.value>100||this.value<0)&&e(this).spinner("value",0)}})},initInputMask:function(){e("[data-mask]").inputmask(),e("[data-currency]").inputmask({radixPoint:",",alias:"currency",removeMaskOnSubmit:!0,unmaskAsNumber:!0,min:0,onBeforeMask:function(e,t){var i=e||0;return i},oncleared:function(t){var i=e(this);(null==this.inputmask.unmaskedvalue()||isNaN(parseFloat(this.inputmask.unmaskedvalue())))&&i.inputmask("setvalue",0)}}),e("[data-currency-precise]").inputmask({radixPoint:",",alias:"currency",removeMaskOnSubmit:!0,unmaskAsNumber:!0,min:0,digits:0,onBeforeMask:function(e,t){var i=e||0;return i},oncleared:function(t){var i=e(this);(null==this.inputmask.unmaskedvalue()||isNaN(parseFloat(this.inputmask.unmaskedvalue())))&&i.inputmask("setvalue",0)}}),e("[data-currency-numeric]").inputmask({radixPoint:",",alias:"numeric",groupSeparator:",",autoGroup:!0,autoUnmask:!0}),e("[data-currency-text]").inputmask({alias:"numeric",rightAlign:!1})},initValidator:function(){e('form[data-toggle="validator"]').each(function(){var t=e(this);e.fn.validator.call(t,t.data())})},initDatePicker:function(){e(".datepicker").datepicker({autoclose:!0,language:"es",format:"yyyy-mm-dd"})},initDisabledPaste:function(){e(".input-dp").bind("cut copy paste",function(e){e.preventDefault()})},initTimePicker:function(){e(".timepicker").timepicker({showInputs:!1,showMeridian:!1})}},e(function(){t.initComponent=new r,t.initComponent.initialize()})}(jQuery,this,this.document);